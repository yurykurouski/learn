!function(t,e){for(var o in e)t[o]=e[o]}(window,webpackJsonp([44],{"./common/static/xmodule/modules/js/001-d6382f1a5a624bc598e9d6d2ddcf7aa2.js":function(t,e,o){(function(t){(function(){(function(){"use strict";this.Sequence=function(){function e(o){var i=this;this.removeBookmarkIconFromActiveNavItem=function(t){return e.prototype.removeBookmarkIconFromActiveNavItem.apply(i,[t])},this.addBookmarkIconToActiveNavItem=function(t){return e.prototype.addBookmarkIconToActiveNavItem.apply(i,[t])},this._change_sequential=function(t,o){return e.prototype._change_sequential.apply(i,[t,o])},this.selectPrevious=function(t){return e.prototype.selectPrevious.apply(i,[t])},this.selectNext=function(t){return e.prototype.selectNext.apply(i,[t])},this.goto=function(t){return e.prototype.goto.apply(i,[t])},this.toggleArrows=function(){return e.prototype.toggleArrows.apply(i)},this.addToUpdatedProblems=function(t,o,n){return e.prototype.addToUpdatedProblems.apply(i,[t,o,n])},this.hideTabTooltip=function(t){return e.prototype.hideTabTooltip.apply(i,[t])},this.displayTabTooltip=function(t){return e.prototype.displayTabTooltip.apply(i,[t])},this.arrowKeys={LEFT:37,UP:38,RIGHT:39,DOWN:40},this.updatedProblems={},this.requestToken=t(o).data("request-token"),this.el=t(o).find(".sequence"),this.path=t(".path"),this.contents=this.$(".seq_contents"),this.content_container=this.$("#seq_content"),this.sr_container=this.$(".sr-is-focusable"),this.num_contents=this.contents.length,this.id=this.el.data("id"),this.ajaxUrl=this.el.data("ajax-url"),this.nextUrl=this.el.data("next-url"),this.prevUrl=this.el.data("prev-url"),this.savePosition=this.el.data("save-position"),this.showCompletion=this.el.data("show-completion"),this.keydownHandler(t(o).find("#sequence-list .tab")),this.base_page_title=(t("title").data("base-title")||"").trim(),this.bind(),this.render(parseInt(this.el.data("position"),10))}return e.prototype.$=function(e){return t(e,this.el)},e.prototype.bind=function(){this.$("#sequence-list .nav-item").click(this.goto),this.$("#sequence-list .nav-item").keypress(this.keyDownHandler),this.el.on("bookmark:add",this.addBookmarkIconToActiveNavItem),this.el.on("bookmark:remove",this.removeBookmarkIconFromActiveNavItem),this.$("#sequence-list .nav-item").on("focus mouseenter",this.displayTabTooltip),this.$("#sequence-list .nav-item").on("blur mouseleave",this.hideTabTooltip)},e.prototype.previousNav=function(e,o){var i,n=t(e).parent().parent();i=0===o?n.find("li").last():n.find("li:eq("+o+")").prev(),n.find(".tab").removeClass("visited").removeClass("focused"),i.find(".tab").addClass("focused").focus()},e.prototype.nextNav=function(e,o,i){var n,s=t(e).parent().parent();n=o===i?s.find("li").first():s.find("li:eq("+o+")").next(),s.find(".tab").removeClass("visited").removeClass("focused"),n.find(".tab").addClass("focused").focus()},e.prototype.keydownHandler=function(e){var o=this;e.keydown(function(e){var i=e.keyCode,n=t(e.currentTarget),s=n.parent().parent(),a=s.find("li").index(n.parent()),r=s.find("li").size()-1;switch(i){case o.arrowKeys.LEFT:e.preventDefault(),o.previousNav(n,a);break;case o.arrowKeys.RIGHT:e.preventDefault(),o.nextNav(n,a,r)}})},e.prototype.displayTabTooltip=function(e){t(e.currentTarget).find(".sequence-tooltip").removeClass("sr")},e.prototype.hideTabTooltip=function(e){t(e.currentTarget).find(".sequence-tooltip").addClass("sr")},e.prototype.updatePageTitle=function(){var e,o,i=this.link_for(this.position);i&&i.data("page-title")&&(e=i.data("page-title"),o=e+" | "+this.base_page_title,o!==document.title&&(document.title=o),t(".nav-item-sequence").text(e))},e.prototype.hookUpContentStateChangeEvent=function(){var e=this;return t(".problems-wrapper").bind("contentChanged",function(t,o,i,n){return e.addToUpdatedProblems(o,i,n)})},e.prototype.addToUpdatedProblems=function(t,e,o){this.anyUpdatedProblems(this.position)||(this.updatedProblems[this.position]={}),this.updatedProblems[this.position][t]=[e,o]},e.prototype.anyUpdatedProblems=function(t){return void 0!==this.updatedProblems[t]},e.prototype.enableButton=function(t,e){this.$(t).removeClass("disabled").removeAttr("disabled").click(e)},e.prototype.disableButton=function(t){this.$(t).addClass("disabled").attr("disabled",!0)},e.prototype.updateButtonState=function(t,e,o,i){o&&"None"===i?this.disableButton(t):this.enableButton(t,e)},e.prototype.toggleArrows=function(){var t,e,o,i;this.$(".sequence-nav-button").unbind("click"),t=1===this.position,i=".sequence-nav-button.button-previous",this.updateButtonState(i,this.selectPrevious,t,this.prevUrl),e=this.position>=this.contents.length,o=".sequence-nav-button.button-next",this.updateButtonState(o,this.selectNext,e,this.nextUrl)},e.prototype.render=function(e){var o,i,n,s,a=this;this.position!==e&&(this.position&&(this.mark_visited(this.position),this.showCompletion&&this.update_completion(this.position),this.savePosition&&(n=this.ajaxUrl+"/goto_position",t.postWithPrefix(n,{position:e}))),this.el.trigger("sequence:change"),this.mark_active(e),i=this.contents.eq(e-1),o=this.el.find(".active .bookmark-icon").hasClass("bookmarked"),this.content_container.html(i.text()).attr("aria-labelledby",i.attr("aria-labelledby")).data("bookmarked",o),this.anyUpdatedProblems(e)&&t.each(this.updatedProblems[e],function(t,e){var o,i;o=e[0],i=e[1],a.content_container.find("[data-problem-id='"+t+"']").data("content",o).data("problem-score",i.current_score).data("problem-total-possible",i.total_possible).data("attempts-used",i.attempts_used)}),XBlock.initializeBlocks(this.content_container,this.requestToken),window.hasOwnProperty("update_schematics")&&window.update_schematics(),this.position=e,this.toggleArrows(),this.hookUpContentStateChangeEvent(),this.updatePageTitle(),s=this.content_container.find("a.seqnav"),s.click(this.goto),this.sr_container.focus())},e.prototype.goto=function(e){var o,i,n,s,a;if(e.preventDefault(),t(e.currentTarget).hasClass("seqnav"))s=t(e.currentTarget).attr("href");else{if(void 0!==t(e.currentTarget).data("href"))return location.href=t(e.currentTarget).data("href"),!0;s=t(e.currentTarget).data("element")}s>=1&&s<=this.num_contents?(n=t(e.target).closest('nav[class="sequence-bottom"]').length>0,a=n?"bottom":"top",Logger.log("edx.ui.lms.sequence.tab_selected",{current_tab:this.position,target_tab:s,tab_count:this.num_contents,id:this.id,widget_placement:a}),window.queuePollerID&&(window.clearTimeout(window.queuePollerID),delete window.queuePollerID),this.render(s)):(o=gettext("Sequence error! Cannot navigate to %(tab_name)s in the current SequenceModule. Please contact the course staff."),i=interpolate(o,{tab_name:s},!0),alert(i))},e.prototype.selectNext=function(t){this._change_sequential("next",t)},e.prototype.selectPrevious=function(t){this._change_sequential("previous",t)},e.prototype._change_sequential=function(e,o){var i,n,s,a,r,l;"previous"!==e&&"next"!==e||(o.preventDefault(),i="edx.ui.lms.sequence."+e+"_selected",n=t(o.target).closest('nav[class="sequence-bottom"]').length>0,l=n?"bottom":"top","next"===e?r=this.nextUrl:"previous"===e&&(r=this.prevUrl),Logger.log(i,{id:this.id,current_tab:this.position,tab_count:this.num_contents,widget_placement:l}).always(function(){r&&(window.location.href=r)}),r||(n&&t.scrollTo(0,150),a={next:1,previous:-1},s=this.position+a[e],this.render(s)))},e.prototype.link_for=function(t){return this.$("#sequence-list .nav-item[data-element="+t+"]")},e.prototype.mark_visited=function(t){this.link_for(t).attr({tabindex:"-1","aria-selected":"false","aria-expanded":"false"}).removeClass("inactive").removeClass("active").removeClass("focused").addClass("visited")},e.prototype.update_completion=function(e){var o=this.link_for(e),i=this.ajaxUrl+"/get_completion",n=o[0].attributes["data-id"].value,s=o.find(".check-circle");s.length&&t.postWithPrefix(i,{usage_key:n},function(t){!0===t.complete&&s.removeClass("is-hidden")})},e.prototype.mark_active=function(t){this.link_for(t).attr({tabindex:"0","aria-selected":"true","aria-expanded":"true"}).removeClass("inactive").removeClass("visited").removeClass("focused").addClass("active"),this.$(".sequence-list-wrapper").focus()},e.prototype.addBookmarkIconToActiveNavItem=function(t){t.preventDefault(),this.el.find(".nav-item.active .bookmark-icon").removeClass("is-hidden").addClass("bookmarked"),this.el.find(".nav-item.active .bookmark-icon-sr").text(gettext("Bookmarked"))},e.prototype.removeBookmarkIconFromActiveNavItem=function(t){t.preventDefault(),this.el.find(".nav-item.active .bookmark-icon").removeClass("bookmarked").addClass("is-hidden"),this.el.find(".nav-item.active .bookmark-icon-sr").text("")},e}()}).call(this)}).call(window)}).call(e,o(0))},20:function(t,e,o){o("./common/static/xmodule/modules/js/000-58032517f54c5c1a704a908d850cbe64.js"),t.exports=o("./common/static/xmodule/modules/js/001-d6382f1a5a624bc598e9d6d2ddcf7aa2.js")}},[20]));